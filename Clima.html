<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API_Prueba</title>
    <link rel="stylesheet" href="assets/css/Modal.css">
    <link rel="stylesheet" href="assets/css/Style.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
    <!-- <link rel="stylesheet" href="assets/css/main.css" /> -->
	<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	
    
</head>
<body style="background-color: rgb(145, 148, 150);">

    <!-- Menu de inicio -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="Index.html"><img src="images/Logo.jpg" alt="Logo" width="70px"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" href="ElectronicaAutomotriz.html">¿Quiénes somos?<span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="CajasDeCambio.html">Nuestros servicios</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="Clima.html">Consulta el Clima</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="Contacto.html">Contáctanos</a>
            </li>
            <!-- <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-expanded="false">
                Nuestros Servicios
              </a>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="ElectronicaAutomotriz.html">Electrónica Automotriz</a>
                <a class="dropdown-item" href="CajasDeCambio.html">Cajas de cambio</a>
                <a class="dropdown-item" href="SuspencionDireccion.html">Suspensión y Dirección</a>
                <a class="dropdown-item" href="Carrito.html">Compra de servicios</a>
              </div>
            </li> -->
          </ul>
          <!-- <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="search" placeholder="Buscar" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Buscar</button>
          </form> -->
        </div>
      </nav>


    <center>
        <h1>Clima:</h1>
        <h5 id="lugar"></h5>
    </center>
            

        <div id="clima"></div> 

            <!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
    

    <script>
        const settings = {
            async: true,
            crossDomain: true,
            url: 'https://visual-crossing-weather.p.rapidapi.com/forecast?aggregateHours=24&location=Punta%20Arenas%2C%20Chile&contentType=json&unitGroup=metric&shortColumnNames=0',
            // url: 'https://visual-crossing-weather.p.rapidapi.com/forecast?aggregateHours=24&location=La%20Florida%2C%20Regi%C3%B3n%20Metropolitana%20de%20Santiago&contentType=json&unitGroup=metric&shortColumnNames=0',
            method: 'GET',
            headers: {
                'X-RapidAPI-Key': 'fbf8112a5emsh5a28826d27b54fcp159651jsn85246c13fda1',
                'X-RapidAPI-Host': 'visual-crossing-weather.p.rapidapi.com'
            }
        };

        let localidad = 'Punta Arenas, Chile';
        $.ajax(settings).done(function (response) {
            console.log(response);
            $("#lugar").append("<h4>"+localidad+ "</h4><hr>");
            for(let i=0; i<=10; i++){
            let datosClima = response.locations[localidad].values[i];
            // console.log(datosClima.temp);
            // console.log(datosClima.maxt);
            // console.log(datosClima.mint);
            // console.log(datosClima.datetimeStr);
            //console.log(console.locations[localidad].currentConditions.icon);
            // locations["La Florida, Región Metropolitana de Santiago"].currentConditions.icon

            // $("#clima").append("<h5>Temperatura: "+datosClima.temp+ "°C</h5>");
            // $("#clima").append("<h5>Max: "+datosClima.maxt+ "°C</h5>");
            // $("#clima").append("<h5>Min: "+datosClima.mint+ "°C</h5>");
            // $("#clima").append("<h5>Min: "+datosClima.conditions+ "</h5>");
            // $("#clima").append("<h5>Fecha: "+datosClima.datetimeStr.split('T00:00:00-04:00')+"</h5><hr>")};
            $("#clima").append('<center><div class="card text-white bg-primary mb-3" style="max-width: 18rem; border-radius: 10px;">'+
                                '<div class="card-header"><h4 style="color: black; font-size: 2rem;">'+datosClima.datetimeStr.substr(0, 10)+'<h4></div>'+
                                '<div class="card-body">'+
                                    '<h1 class="card-title">'+datosClima.temp+ '°C</h1>'+
                                    '<img src="images/clima.jpg" style="border-radius: 10px;" class="d-block w-100" alt="clima" height="100px">'+
                                    '<h4>'+datosClima.mint+' / '+datosClima.maxt+'</h4>'+
                                '</div></center>')};        
        });

        // const settings = {
        //     async: true,
        //     crossDomain: true,
        //     url: 'https://visual-crossing-weather.p.rapidapi.com/forecast?aggregateHours=24&location=Punta%20Arenas%2C%20Chile&contentType=json&unitGroup=metric&shortColumnNames=0',
        //     method: 'GET',
        //     headers: {
        //         'X-RapidAPI-Key': 'fbf8112a5emsh5a28826d27b54fcp159651jsn85246c13fda1',
        //         'X-RapidAPI-Host': 'visual-crossing-weather.p.rapidapi.com'
        //     }
        // };

        // $.ajax(settings).done(function (response) {
        //     console.log(response);
        // });
    </script>
    
</body>
</html>